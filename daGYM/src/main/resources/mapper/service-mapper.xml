<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="serviceMapper">
 
 
 <resultMap type="Board" id="boardResultSet">
        <id property="boardNo" column="BOARD_NO"/>
        <result property="memberNo" column="BOARD_WRITER"/>
        <result property="boardType" column="BOARD_TYPE"/>
        <result property="boardTitle" column="BOARD_TITLE"/>
        <result property="boardContent" column="BOARD_CONTENT"/>
        <result property="boardEnrollDate" column="BOARD_ENROLL_DATE"/>
        <result property="boardModiftDate" column="BOARD_MODIFY_DATE"/>
        <result property="boardStatus" column="BOARD_STATUS"/>
        <result property="qnaCode" column="QUESTION_CODE"/>
        <result property="startDate" column="START_DATE"/>
        <result property="endDate" column="END_DATE"/>
        <result property="views" column="VIEWS"/>
  </resultMap>
  
  <!-- 전체게시글 수 조회 -->
  <select id="getListCount" parameterType="_int" resultType="_int">
	SELECT COUNT(*) FROM S_BOARD WHERE BOARD_TYPE = #{type}
  </select>
  
  <!-- 게시글 목록 조회  -->
  <select id="selectList" parameterType="_int" resultMap="boardResultSet">
  
  SELECT * FROM S_BOARD2
  WHERE BOARD_TYPE = #{boardType}
  ORDER BY BOARD_NO DESC
  
  	<!-- SELECT ROWNUM BOARD_NO, MEMBER_ID,BOARD_TITLE, BOARD_CONTENT,
            BOARD_ENROLL_DATE, BOARD_MODIFY_DATE, BOARD_STATUS,
           QUESTION_TYPE,BOARD_CATEGORY,
            MEMBER_ID,VIEWS
	FROM BOARD
	JOIN MEMBER ON(BOARD_WRITER = MEMBER_NO)
	JOIN BOARD_TYPE USING (BOARD_TYPE)
	JOIN QUESTION_TYPE USING (QUESTION_CODE)
	WHERE BOARD_STATUS='Y' AND BOARD_TYPE=#{boardType}
	ORDER BY BOARD_NO DESC -->
  
  </select>
  
  <!-- faq 게시글 목록 조회 -->
  <select id="selectFaqList" parameterType="_int" resultMap="boardResultSet">
  		
  	SELECT BOARD_NO, MEMBER_ID , 
  	BOARD_TITLE, BOARD_CONTENT, BOARD_ENROLL_DATE,
  	BOARD_MODIFY_DATE, VIEWS 
  	FROM FAQ_BOARD 
  	WHERE BOARD_TYPE=#{boardType}
  	ORDER BY BOARD_NO DESC
  	<!-- SELECT ROWNUM BOARD_NO, MEMBER_ID,BOARD_TITLE, BOARD_CONTENT,
            BOARD_ENROLL_DATE, BOARD_MODIFY_DATE, BOARD_STATUS,
           QUESTION_TYPE,BOARD_CATEGORY,
            MEMBER_ID,VIEWS
	FROM BOARD
	JOIN MEMBER ON(BOARD_WRITER = MEMBER_NO)
	JOIN BOARD_TYPE USING (BOARD_TYPE)
	JOIN QUESTION_TYPE USING (QUESTION_CODE)
	WHERE BOARD_STATUS='Y' AND BOARD_TYPE=#{boardType}
	ORDER BY BOARD_NO DESC -->
  	
  </select>
  
  <!-- faq게시글 상세 조회 -->
  <select id="selectFaqBoard" parameterType="_int" resultMap="boardResultSet">
  		
  	SELECT * FROM S_BOARD WHERE BOARD_NO=#{boardNo} AND BOARD_STATUS='Y'
  </select>
  
  <!-- 게시글 조회 수 증가 -->
  <update id="increaseCount" parameterType="_int">
  	UPDATE BOARD SET VIEWS=VIEWS+1 WHERE BOARD_NO=#{boardNo}
  </update>
  
  <!-- 검색 조건이 포함된 faq 전체 게시글 수 조회 -->
  
  
</mapper>
